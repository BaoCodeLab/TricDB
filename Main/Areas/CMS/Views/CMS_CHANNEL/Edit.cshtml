@using Main.Extensions
@using Main.ViewModels;
@model VM_CMS_CHANNEL
<div class="layui-card" style="margin-bottom:0">
    <div class="layui-card-header">编辑</div>
    <div class="layui-card-body">
        <form action='@Url.Action("Update", "API_CMS_CHANNEL")' method="post" class="layui-form layui-form-pane" lay-filter="mainform" id="mainform">
            @Html.AntiForgeryToken()
            <div class="layui-form-item">
                <div class="layui-row">
                    <div class="layui-col-md3 layui-col-sm4" style="display:none;">
                        <div class="layui-fluid">
                            <label asp-for="CHANNELID" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <input asp-for="CHANNELID" class="layui-input" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4" style="display:none;">
                        <div class="layui-fluid">
                            <label asp-for="PARENTCHANNELID" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <input asp-for="PARENTCHANNELID" class="layui-input" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4">
                        <div class="layui-fluid">
                            <label asp-for="CHANNELNAME" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <input asp-for="CHANNELNAME" class="layui-input" required />
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4">
                        <div class="layui-fluid">
                            <label asp-for="PRECHANNELNAME" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <input asp-for="PRECHANNELNAME" class="layui-input" />
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4">
                        <div class="layui-fluid">
                            <label asp-for="CHANNELREDIRECT" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <input asp-for="CHANNELREDIRECT" class="layui-input" />
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4">
                        <div class="layui-fluid">
                            <label asp-for="CHANNELXH" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <input asp-for="CHANNELXH" class="layui-input" />
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4">
                        <div class="layui-fluid">
                            <label asp-for="ISMENU" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                @Html.EditorFor(model => model.ISMENU)
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4">
                        <div class="layui-fluid">
                            <label asp-for="ISPUB" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                @Html.EditorFor(model => model.ISPUB)
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4" style="display:none;">
                        <div class="layui-fluid">
                            <label asp-for="IS_DELETE" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <input asp-for="IS_DELETE" class="layui-input" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4" style="display:none;">
                        <div class="layui-fluid">
                            <label asp-for="CREATE_DATE" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <input asp-for="CREATE_DATE" class="layui-input" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4" style="display:none;">
                        <div class="layui-fluid">
                            <label asp-for="MODIFY_DATE" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <input asp-for="MODIFY_DATE" class="layui-input" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4" style="display:none;">
                        <div class="layui-fluid">
                            <label asp-for="OPERATOR" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <input asp-for="OPERATOR" class="layui-input" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3 layui-col-sm4">
                        <div class="layui-fluid">
                            <label asp-for="BZ" class="layui-form-label"></label>
                            <div class="layui-input-block">
                                <input asp-for="BZ" class="layui-input" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr />
            <div class="layui-container">
                <div class="layui-row">
                    <div class="layui-col-xs6 layui-col-sm6 layui-col-md6" style="padding:0 5px">
                        <a class="layui-btn layui-btn-warm layui-btn-fluid" id="submit">
                            保存
                        </a>
                    </div>
                    <div class="layui-col-xs6 layui-col-sm6 layui-col-md6" style="padding:0 5px">
                        <button class="layui-btn layui-btn-normal layui-btn-fluid" id="reset">
                            清空
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<script type="text/javascript">
    layui.use(['form', 'layer', 'table'], function () {
        var form = layui.form, layer = layui.layer, table = layui.table;
        form.render();
        var o_data;
        $.get('@Url.Action("Get", "API_CMS_CHANNEL",new{CHANNELID=Model.CHANNELID})', function (data) {
            form.val("mainform", data);
            o_data = data;
        });
        $("#reset").click(function () {
            form.val("mainform", o_data);
        });
        $("#submit").click(function () {
            if ($("#mainform").valid()) {
                $("#mainform").ajaxSubmit({
                    type:"PUT",
                    success: function (d) {
                        var index = parent.layer.getFrameIndex(window.name);
                        parent.layui.table.reload('table');
                        parent.layer.close(index);
                    },
                    error: function (d) {
                        layer.alert(d.responseJSON.msg);
                    }
                });
            }
        });
    });
</script>
